# 问题记录

## Dashboard.jsx JSX 语法错误导致页面白屏
- **时间**: 2025-12-18
- **模块/接口**: Frontend / Dashboard
- **环境**: Local Development (Vite)
- **现象**: 页面报错 `[plugin:vite:react-babel] Unexpected token, expected "," (1512:26)`，导致页面白屏。
- **复现步骤**: 访问 Dashboard 页面。
- **根因分类**: 代码编写错误 (Syntax Error) - 三元运算符 else 分支中 `map` 函数调用外层包裹的括号未闭合。
- **修复方案**: 在 line 1512 补全缺失的闭合括号 `)`，将 `})}` 修改为 `}))}`。
- **影响评估**: 修复后页面恢复正常渲染，商品列表区域正常显示。
- **源码位置**: `frontend/src/pages/Dashboard.jsx:1512`
- **后续防线**: 依赖 IDE 语法检查与 ESLint 实时反馈。

## 后端并发刷新缓存竞态条件
- **时间**: 2025-12-18
- **模块/接口**: Backend / api/routes/data.py & news.py
- **环境**: All
- **现象**: 高并发请求同一过期缓存 Key 时，可能触发重复的后台刷新任务，导致线程资源浪费。
- **复现步骤**: 模拟多线程同时请求 `/api/data` 或 `/api/news/*` 且缓存失效时。
- **根因分类**: 并发控制 (Race Condition) - 全局集合 `_pending_refreshes` 的检查与写入操作未加锁，非原子性。
- **修复方案**: 引入 `threading.Lock`，在访问 `_pending_refreshes` 临界区时加锁保护。
- **影响评估**: 确保同一 Key 仅触发一个后台任务，降低系统负载，无功能副作用。
- **源码位置**: 
  - `web-crawler/api/routes/data.py:22` (引入锁)
  - `web-crawler/api/routes/news.py:336` (加锁逻辑)
- **后续防线**: 代码审查需重点关注全局共享状态的并发访问。
